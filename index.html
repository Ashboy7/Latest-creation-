<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AnimeVerse - Global Anime Browser</title>
  <link rel="stylesheet" href="style.css" />
  <script type="module">
    // Firebase SDKs
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

// Auth handlers
const loginForm = document.getElementById('login-form');
const logoutBtn = document.getElementById('logout');
const userInfo = document.getElementById('user-info');

loginForm.addEventListener('submit', async (e) => {
  e.preventDefault();
  const email = loginForm.email.value;
  const password = loginForm.password.value;
  try {
    await signInWithEmailAndPassword(auth, email, password);
  } catch (err) {
    alert("Login failed. Trying to create account.");
    await createUserWithEmailAndPassword(auth, email, password);
  }
});

logoutBtn.addEventListener('click', async () => {
  await signOut(auth);
});

onAuthStateChanged(auth, async (user) => {
  if (user) {
    userInfo.innerText = `Logged in as: ${user.email}`;
    document.body.classList.add("logged-in");

    // Load favorites
    const favDoc = await getDoc(doc(db, "favorites", user.uid));
    if (favDoc.exists()) {
      for (const id of favDoc.data().items) {
        const btn = document.querySelector(`[data-id='${id}'] .like-btn`);
        if (btn) {
          btn.textContent = '❤️ Liked';
          btn.style.background = '#28a745';
        }
      }
    }
  } else {
    userInfo.innerText = "Not logged in";
    document.body.classList.remove("logged-in");
  }
});

// Save favorite anime
document.addEventListener('click', async (e) =>

    
